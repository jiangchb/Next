#export LD_LIBRARY_PATH=/home/fanyucai/software/zlib/zlib-v1.2.11/lib/:$LD_LIBRARY_PATH
#/home/fanyucai/software/java/jdk1.8.0_144/bin/java -Xmx20g -cp /home/fanyucai/software/Rockhopper/Rockhopper-2.0.3/Rockhopper.jar Rockhopper -p 8 -rf -v true -TIME -SAM -g /public/cluster2/works/intern/ccj_temp1/Prok2/genome/ /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/X1.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/X1.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/X2.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/X2.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/X3.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/X3.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Y1.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Y1.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Y2.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Y2.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Y3.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Y3.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Z1.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Z1.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Z2.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Z2.R2.fq.gz /public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Z3.R1.fq.gz%/public/cluster2/works/intern/ccj_temp1/Prok2/clean_data/Z3.R2.fq.gz   -L X1,X2,X3,Y1,Y2,Y3,Z1,Z2,Z3 -o /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results
grep -h -B2 -A9 "Successfully aligned reads" /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/summary.txt |awk 'BEGIN{RS="\n--\n"; FS=OFS="\n"} {sub("\t","", $1); sub(".R2.fq.*", "", $1); id=$1; $1="Sample\t"$1} {sub(":.*\t", ":\t", $2); sub(":.*\t", ":\t", $12)} {split($3,a,"\t"); $3=a[1]"\t"a[2]" ("a[3]")"} {for(i=4; i<=NF; i++) sub("^\t", "", $i);print $0 > "/public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/_"id"_mapping_summary.txt"}'
awk 'BEGIN{FS="\t"; OFS=","} NR==FNR{if(FNR<13) a[FNR]=$1","$2; next}(FNR<13){a[FNR]=a[FNR]","$2} END{for(i=1; i<=length(a); i++) print a[i]}' /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/_*_mapping_summary.txt > /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/Rockhopper_mapping_summary.txt
awk -F ',' '{ $1=null;print }' OFS=',' /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/Rockhopper_mapping_summary.txt > /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/temp.out
paste -d "" /home/lipeng/lipeng_script/pipline/Prok_Automata/2.Rockhooper/title.csv /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/temp.out > /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/temp.csv
sed "s/,/\t/g" /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/temp.csv > /public/cluster2/works/intern/ccj_temp1/Prok2/Rockhopper_results/Rockhopper_mapping_summary.xls
